{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///E:/AntiGravity/First%20Project/Power%20Digital%20Media/power-digital-media-web/src/app/api/ai/hooks/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport OpenAI from 'openai';\r\n\r\nconst openai = new OpenAI({\r\n    apiKey: process.env.OPENAI_API_KEY,\r\n});\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const { topic } = await request.json();\r\n\r\n        if (!process.env.OPENAI_API_KEY) {\r\n            return NextResponse.json({ error: 'AI Protocol Offline: Missing API Key' }, { status: 500 });\r\n        }\r\n\r\n        const completion = await openai.chat.completions.create({\r\n            model: \"gpt-4o\",\r\n            messages: [\r\n                {\r\n                    role: \"system\",\r\n                    content: `You are a world-class podcast strategist and growth engineer. \r\n                    Your goal is to provide dual-intelligence for a podcast topic:\r\n                    1. VIRAL HOOKS: 5 scroll-stopping viral hook ideas for social clips.\r\n                    2. SEARCH INTELLIGENCE: 3 critical questions people are actually searching for (Answer the Public style).\r\n                    3. VISUAL PROTOCOL: 1 detailed, high-fidelity image description for a YouTube thumbnail.\r\n                    \r\n                    Format the output in three clear sections with emojis and bold headers. Keep the VISUAL PROTOCOL section separate at the bottom. Start the visual prompt with 'PROMPT:' for easy extraction.`\r\n                },\r\n                {\r\n                    role: \"user\",\r\n                    content: `Topic: ${topic}`\r\n                }\r\n            ],\r\n            temperature: 0.8,\r\n        });\r\n\r\n        const fullContent = completion.choices[0].message.content || \"\";\r\n        const [textPart, promptPart] = fullContent.split('PROMPT:');\r\n\r\n        return NextResponse.json({\r\n            hooks: textPart.trim(),\r\n            thumbnailPrompt: promptPart ? promptPart.trim() : \"\"\r\n        });\r\n    } catch (error) {\r\n        console.error(\"AI Protocol Breach:\", error);\r\n        return NextResponse.json({ error: 'AI Logic Failure' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAEA,MAAM,SAAS,IAAI,mLAAM,CAAC;IACtB,QAAQ,QAAQ,GAAG,CAAC,cAAc;AACtC;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEpC,IAAI,CAAC,QAAQ,GAAG,CAAC,cAAc,EAAE;YAC7B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAuC,GAAG;gBAAE,QAAQ;YAAI;QAC9F;QAEA,MAAM,aAAa,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,OAAO;YACP,UAAU;gBACN;oBACI,MAAM;oBACN,SAAS,CAAC;;;;;;gNAMkL,CAAC;gBACjM;gBACA;oBACI,MAAM;oBACN,SAAS,CAAC,OAAO,EAAE,OAAO;gBAC9B;aACH;YACD,aAAa;QACjB;QAEA,MAAM,cAAc,WAAW,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,IAAI;QAC7D,MAAM,CAAC,UAAU,WAAW,GAAG,YAAY,KAAK,CAAC;QAEjD,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,OAAO,SAAS,IAAI;YACpB,iBAAiB,aAAa,WAAW,IAAI,KAAK;QACtD;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAmB,GAAG;YAAE,QAAQ;QAAI;IAC1E;AACJ"}}]
}